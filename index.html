<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–®–ê–ì–ê–ô –î–û–ú–ê ‚ö° –ö–≤–∏–∑</title>
<meta name="color-scheme" content="light only" />
<style>
:root{
  --r:#CF2C02;--o:#E85D04;--y:#FFBA08;--g:#E6E6E6;--txt:#141414;
  --disc-bg:#fff7ef;--disc-fg:#a24b00;--disc-win:#e9f9f0;--disc-win-fg:#0f7a42;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--txt);background:#fff}
.app{width:min(960px,100%);margin:0 auto;padding:16px}
.card{background:#fff;border-radius:22px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:16px;overflow:hidden}

/* —Ç–æ–ø-–ø–∞–Ω–µ–ª—å */
#progress{display:flex;align-items:center;gap:10px;margin-bottom:12px}
#progress .plogo{margin-left:auto}
#progress .plogo img{height:32px;width:auto}
#disc{display:none;align-items:center;gap:8px;border:2px solid #ffd5c2;background:var(--disc-bg);color:var(--disc-fg);border-radius:12px;padding:8px 12px;font-weight:800}
#disc.win{background:var(--disc-win);color:var(--disc-win-fg);border-color:#cfeede}
#disc .tip{font-weight:600;color:#666;font-size:.9rem}

/* —ç–∫—Ä–∞–Ω—ã */
.screen{display:none;animation:.3s fade ease both}
.screen.is{display:block}
@keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
h1{font-size:clamp(22px,5.4vw,38px);line-height:1.15;margin:8px 0 10px}
h2{font-size:clamp(20px,4.6vw,28px);line-height:1.18;margin:6px 0 10px}
.hint{color:#6b6b6b}
.grid{display:grid;gap:10px}
.cols2{grid-template-columns:1fr 1fr}
@media (max-width:640px){.cols2{grid-template-columns:1fr}}

/* –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—ã–±–æ—Ä–∞ */
.opt{border:2px solid var(--g);border-radius:14px;padding:12px;display:flex;gap:10px;align-items:center;background:#fff;cursor:pointer;transition:.18s}
.opt.is{border-color:var(--o);box-shadow:0 8px 18px rgba(232,93,4,.16)}
.opt--img{flex-direction:column;align-items:center;text-align:center}
.opt--img img{width:100%;height:180px;object-fit:contain;background:#fafafa;border-radius:12px}
.opt--img span{margin-top:8px;font-weight:600}

/* —á–∏–ø—Å—ã */
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip{border:2px solid var(--g);border-radius:999px;padding:8px 12px;background:#fff;font-weight:600;cursor:pointer}
.chip.is{border-color:var(--o);box-shadow:0 8px 16px rgba(232,93,4,.12)}

/* —Ñ–æ—Ä–º—ã */
.text{width:100%;border:2px solid var(--g);border-radius:12px;padding:10px 12px;font-size:1rem}

/* –∫–Ω–æ–ø–∫–∏ */
.actions{display:flex;gap:8px;margin-top:14px}
.btn{border:none;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer}
.primary{background:linear-gradient(135deg,var(--r),var(--o));color:#fff;box-shadow:0 10px 18px rgba(207,44,2,.25)}
.ghost{background:#fff;border:2px solid var(--g)}
.sticky{position:sticky;bottom:0;background:linear-gradient(0deg,#fff 70%,rgba(255,255,255,0));padding-top:8px;z-index:20}

/* hero */
.hero{border-radius:20px;overflow:hidden;margin-bottom:12px;box-shadow:0 10px 18px rgba(0,0,0,.08)}
.hero video{display:block;width:100%;height:auto;aspect-ratio:16/9;object-fit:cover}

/* BMI */
.bmi-tag{display:inline-block;padding:4px 8px;border-radius:999px;font-weight:700;font-size:.9rem}
.bmi-ok{background:#e8f7ee;color:#0f7a42}.bmi-warn{background:#fff4e6;color:#a04b00}.bmi-bad{background:#ffe9e6;color:#a11000}

/* —Ü–µ–ª—å: —Å–ª–∞–π–¥–µ—Ä + —Å–∏–ª—É—ç—Ç—ã (–∏–Ω–≤–µ—Ä—Å–∏—è) */
.goalw{display:grid;gap:10px}
.goal-top{display:grid;gap:10px;grid-template-columns:1.05fr .95fr}
@media (max-width:760px){.goal-top{grid-template-columns:1fr}}
.goal-card{border:2px solid var(--g);border-radius:16px;padding:10px;background:#fff}
.goal-fig{border:2px solid var(--g);border-radius:16px;padding:8px;height:260px;background:#fff}
.goal-stack{position:relative;width:100%;height:100%}
.goal-stack img{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;opacity:0;transition:opacity .25s ease}
#goalRange{width:100%;height:36px;background:transparent}
#goalRange::-webkit-slider-runnable-track{height:12px;border-radius:999px;background:linear-gradient(90deg,#ffd0bd 0%,#ffe7c7 50%,#e9f9f0 100%)}
#goalRange::-webkit-slider-thumb{-webkit-appearance:none;width:26px;height:26px;border-radius:50%;background:#fff;border:3px solid var(--o);margin-top:-7px;box-shadow:0 4px 12px rgba(232,93,4,.25)}

/* ¬´–ê–≥–∞¬ª-–±–ª–æ–∫ –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º ¬´–≤ –Ω–µ–¥–µ–ª—é¬ª */
.aha{margin-top:8px;border-radius:16px;padding:12px;background:linear-gradient(180deg,#fff8f2,#fff);box-shadow:0 6px 20px rgba(232,93,4,.08)}
.aha.hidden{display:none}
.aha img{width:100%;display:block;border-radius:12px;margin-top:8px;box-shadow:0 8px 22px rgba(0,0,0,.08)}

/* –±–ª–æ–∫ –∫–µ–π—Å–∞ */
.case{border:2px solid var(--g);border-radius:16px;padding:12px;background:#fff;display:grid;grid-template-columns:96px 1fr;gap:12px;align-items:center;margin:10px 0}
.case img{width:96px;height:96px;object-fit:cover;border-radius:12px;background:#f6f6f6}

/* —Ç–∞–±—ã –≤–∏–¥–µ–æ */
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.tab{border:2px solid var(--g);background:#fff;border-radius:999px;padding:8px 12px;cursor:pointer;font-weight:700}
.tab.is{border-color:var(--o);box-shadow:0 6px 16px rgba(232,93,4,.12)}
.player{margin-top:10px}
.player iframe{width:100%;aspect-ratio:16/9;border:0;border-radius:14px;box-shadow:0 10px 26px rgba(0,0,0,.08)}

/* –æ—Ñ—Ñ–µ—Ä —Å —Ç–∞–π–º–µ—Ä–æ–º */
.deal{margin:8px 0 12px}
.deal-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.deal-badge{border:2px solid #ffd5c2;background:#fff7ef;border-radius:999px;padding:6px 10px;font-weight:800}
.deal-timer{margin-left:auto;font-weight:800;font-size:1.1rem}
.offer-inline{border:2px solid var(--g);border-radius:16px;padding:12px;background:#fff;margin:10px 0}
</style>
</head>
<body>
<div class="app"><div class="card">
  <div id="progress"></div>
  <div id="screens"></div>
</div></div>

<script>
const $=s=>document.querySelector(s),$$=s=>Array.from(document.querySelectorAll(s));
let A=JSON.parse(localStorage.getItem('sdq')||'{}'); const save=()=>localStorage.setItem('sdq',JSON.stringify(A));

/* ---------- –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ —Å–∫–∏–¥–∫–∞ + –ª–æ–≥–æ—Ç–∏–ø) ---------- */
const progressRoot=document.getElementById('progress');
progressRoot.innerHTML=`
  <div id="disc"><span>–í–∞—à–∞ —Å–∫–∏–¥–∫–∞:&nbsp;<span id="discPct">0%</span></span>
    <span class="tip" title="–†–∞—Å—Ç—ë—Ç —Å –∫–∞–∂–¥—ã–º –≤–æ–ø—Ä–æ—Å–æ–º!">‚ìò</span>
  </div>
  <div class="plogo"><img src="logo.png" alt="–®–ê–ì–ê–ô –î–û–ú–ê"></div>
`;

/* ---------- –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã HTML ---------- */
const section=(id,html)=>`<section class="screen${id==='intro'?' is':''}" data-id="${id}">${html}</section>`;
const opts=(id,key,arr,withImages=false)=>`
  <div class="grid cols2" id="${id}" data-key="${key}" data-type="opts">
    ${arr.map(o=>{
      if(withImages) return `<label class="opt opt--img" data-v="${o.key}"><img src="${o.img}" alt=""><span>${o.label}</span></label>`;
      const lab=(typeof o==='string')?o:(o.label||o.value||o.key);
      const val=(typeof o==='string')?o:(o.key||o.value||o.label);
      return `<label class="opt" data-v="${val}"><span>${lab}</span></label>`;
    }).join('')}
  </div>`;
const chips=(id,key,arr,multi=false)=>`
  <div class="chips" id="${id}" data-key="${key}" data-type="chips" data-multi="${multi?1:0}">
    ${arr.map(t=>`<button class="chip" type="button" data-v="${t}">${t}</button>`).join('')}
  </div>`;
const actions=()=>`<div class="actions sticky"><button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button><button class="btn primary" data-next>–î–∞–ª–µ–µ</button></div>`;

/* ---------- –¥–∞–Ω–Ω—ã–µ ---------- */
const AGE=['18‚Äì29','30‚Äì39','40‚Äì49','50+'];
const BODY=[{label:'–•—É–¥–æ—â–∞–≤–æ–µ',key:'slim',img:'skinny.png'},
            {label:'–°—Ä–µ–¥–Ω–µ–µ',key:'avg',img:'slim.png'},
            {label:'–ö—Ä—É–ø–Ω–æ–µ',key:'large',img:'medium.png'},
            {label:'–ò–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å',key:'obese',img:'xl.png'}];
const LIFE=['–°–∏–¥—è—á–∞—è —Ä–∞–±–æ—Ç–∞','–£–º–µ—Ä–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è','–ê–∫—Ç–∏–≤–Ω–∞—è'];
const EXP=['–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∞—Å—å','–ò–Ω–æ–≥–¥–∞ –¥–æ–º–∞ / –ø–æ –≤–∏–¥–µ–æ','–†–µ–≥—É–ª—è—Ä–Ω–æ'];
const MOT=['–î–ª—è –∑–¥–æ—Ä–æ–≤—å—è','–î–ª—è –≤–Ω–µ—à–Ω–æ—Å—Ç–∏','–î–ª—è —ç–Ω–µ—Ä–≥–∏–∏ –∏ –ª—ë–≥–∫–æ—Å—Ç–∏','–î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–µ–±–µ'];
const BAD=['–°–ª–∞–¥–∫–∏–µ –ø–µ—Ä–µ–∫—É—Å—ã','–ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã','–ù–µ–¥–æ—Å—ã–ø','–ß–∞—Å—Ç—ã–π —Å—Ç—Ä–µ—Å—Å'];
const GOOD=['1.5‚Äì2 –ª –≤–æ–¥—ã','–û–≤–æ—â–∏ 400 –≥/–¥–µ–Ω—å','–ë–µ–ª–æ–∫ –∏ —Ñ—Ä—É–∫—Ç—ã –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏—ë–º–µ –ø–∏—â–∏','–°–æ–Ω 7‚Äì8 —á–∞—Å–æ–≤'];

/* –∫–µ–π—Å—ã (–ø—Ä–∏–º–µ—Ä –∏–∑ –∫–ª—É–±–∞) */
const CASES=[
  {kg:10,name:'–ê–ª–µ–∫—Å–∞–Ω–¥—Ä—ã',months:4,img:'alexandra.png'},
  {kg:14,name:'–û–ª—å–≥–∏',months:4,img:'olga.png'},
  {kg:7,name:'–†–µ–∑–µ–¥—ã',months:2,img:'rezeda.jpg'}
];
function pickCase(target){let best=null,d=1e9;for(const c of CASES){const dd=Math.abs(c.kg-target);if(dd<d){d=dd;best=c}}return best}

/* ---------- –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ ---------- */
const html=
section('intro',`
  <div class="hero"><video autoplay muted loop playsinline preload="metadata" poster="logo.png">
    <source src="intro.mp4" type="video/mp4" />
  </video></div>
  <h1><b>–ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—Å—è –ª–∏ —É –≤–∞—Å –ø–æ—Ö—É–¥–µ—Ç—å –Ω–∞ —à–∞–≥–∞—Ö‚Ä¶</b></h1>
  <p class="hint"><b>‚Ä¶–∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø—Ä–æ–±–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∏ —Å–∫–∏–¥–∫—É 70% –Ω–∞ –Ω–∞—à–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã!</b></p>
  <div class="grid">
    <div>
      <div class="hint">–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?</div>
      <input id="name" class="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò—Ä–∏–Ω–∞" autocomplete="name">
    </div>
  </div>
  <div class="actions sticky"><button class="btn primary" id="start">–ü–æ–µ—Ö–∞–ª–∏ ‚Üí</button></div>
`)
+section('age',`<h2>–í–∞—à –≤–æ–∑—Ä–∞—Å—Ç</h2>${opts('ageOpts','age',AGE)}${actions()}`)
+section('promo1',`
  <figure class="hero"><img src="2.jpg" alt="1 –º–ª–Ω –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤" style="width:100%;display:block"></figure>
  <h2>–£ –®–ê–ì–ê–ô –î–û–ú–ê‚ö° —É–∂–µ –±–æ–ª—å—à–µ <b>1&nbsp;–º–∏–ª–ª–∏–æ–Ω–∞</b> –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≤–æ –≤—Å–µ—Ö —Å–æ—Ü—Å–µ—Ç—è—Ö!</h2>
  ${actions()}
`)
+section('body',`<h2>–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ —Å–µ–π—á–∞—Å</h2>${opts('bodyOpts','body',BODY,true)}${actions()}`)
+section('steps',`
  <h2>–°–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –≤—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ —Å–µ–π—á–∞—Å –≤ –¥–µ–Ω—å (–ø—Ä–∏–º–µ—Ä–Ω–æ)?</h2>
  <input id="stepsRange" type="range" min="0" max="25000" step="250" value="4000" style="width:100%">
  <div class="hint">–°–µ–π—á–∞—Å: <b><span id="sv">4000</span> —à–∞–≥–æ–≤</b></div>
  ${actions()}
`)
+section('promo2',`
  <figure class="hero"><img src="otzyv.jpg" alt="10 000 –ª—é–¥–µ–π –≤ –∫–ª—É–±–µ" style="width:100%;display:block"></figure>
  <h2>–£–∂–µ –±–æ–ª—å—à–µ <b>10&nbsp;000</b> –ª—é–¥–µ–π –≤ –∫–ª—É–±–µ –®–ê–ì–ê–ô –î–û–ú–ê ‚ö°</h2>
  ${actions()}
`)
+section('bmi',`
  <h2>–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ (–ò–ú–¢)</h2>
  <p class="hint">–ò–ú–¢ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –≤–µ—Å–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–æ—Å—Ç–∞. –£–∫–∞–∂–∏—Ç–µ —Ä–æ—Å—Ç –∏ –≤–µ—Å ‚Äî –º–æ–∂–Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ.</p>
  <div class="grid cols2">
    <div><div class="hint">–†–æ—Å—Ç, —Å–º</div><input id="h" class="text" type="number" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 165"></div>
    <div><div class="hint">–í–µ—Å, –∫–≥</div><input id="w" class="text" type="number" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 72"></div>
  </div>
  <div id="bmiInfo" class="hint"></div>
  ${actions()}
`)
+section('life',`<h2>–û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</h2>${opts('lifeOpts','life',LIFE)}${actions()}`)
+section('exp',`<h2>–û–ø—ã—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h2>${opts('expOpts','exp',EXP)}${actions()}`)
+section('promo3',`
  <figure class="hero"><img src="walkwalk.jpg" alt="20 –º–ª–Ω —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å" style="width:100%;display:block"></figure>
  <h2>–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —É—á–∞—Å—Ç–Ω–∏—Ü—ã –∫–ª—É–±–∞ –Ω–∞–±–∏—Ä–∞—é—Ç –¥–æ <b>20 –º–∏–ª–ª–∏–æ–Ω–æ–≤</b> —à–∞–≥–æ–≤ üòç</h2>
  ${actions()}
`)
+section('goal',`
  <h2>–í–∞—à–∞ —Ü–µ–ª—å</h2>
  <div class="goalw">
    <div class="goal-top">
      <div class="goal-card">
        <div><b><span id="goalVal">5.0</span> –∫–≥</b> ‚Äî <span id="goalBadge">—É–º–µ—Ä–µ–Ω–Ω–æ</span></div>
        <input id="goalRange" type="range" min="0" max="20" step="0.5" value="5">
        <label style="display:flex;gap:8px;align-items:center;margin-top:8px">
          <input id="goalKeep" type="checkbox"> <span>–ù–∞–∫–∞—á–∞—Ç—å –º—ã—à—Ü—ã</span>
        </label>
      </div>
      <div class="goal-fig">
        <div class="goal-stack" id="goalStack">
          <!-- 0 ‚Äî superfit ... 8 ‚Äî xxl -->
          <img src="superfit.png" data-i="0" alt="">
          <img src="fit.png"      data-i="1" alt="">
          <img src="skinny.png"   data-i="2" alt="">
          <img src="slim.png"     data-i="3" alt="">
          <img src="s.png"        data-i="4" alt="">
          <img src="m.png"        data-i="5" alt="">
          <img src="l.png"        data-i="6" alt="">
          <img src="xl.png"       data-i="7" alt="">
          <img src="xxl.png"      data-i="8" alt="">
        </div>
      </div>
    </div>
    ${actions()}
  </div>
`)
+section('mot',`<h2>–ß—Ç–æ –≤–∞—Å –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç?</h2>${chips('motChips','mot',MOT)}${actions()}`)
+section('perweek',`
  <h2>–°–∫–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ–¥–µ–ª—é?</h2>
  ${chips('pwChips','perweek',['2 —Ä–∞–∑–∞','3 —Ä–∞–∑–∞','4‚Äì5 —Ä–∞–∑','–ö–∞–∂–¥—ã–π –¥–µ–Ω—å 20‚Äì30 –º–∏–Ω'])}
  <div id="aha" class="aha hidden"></div>
  ${actions()}
`)
+section('promo4',`
  <figure class="hero"><img src="doposle.jpg" alt="85% —Ö—É–¥–µ—é—Ç –Ω–∞ 1‚Äì2 –∫–≥ –∑–∞ –Ω–µ–¥–µ–ª—é" style="width:100%;display:block"></figure>
  <h2><b>85%</b> —É—á–∞—Å—Ç–Ω–∏—Ü —Ö—É–¥–µ—é—Ç –Ω–∞ <b>1‚Äì2&nbsp;–∫–≥</b> —É–∂–µ –∑–∞ –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é üî•</h2>
  ${actions()}
`)
+section('hard',`
  <h2>–ß—Ç–æ –¥–∞—ë—Ç—Å—è —Ç—è–∂–µ–ª–µ–µ –≤—Å–µ–≥–æ?</h2>
  <div class="grid cols2" id="hardCards" data-key="hardKey" data-type="opts">
    ${['–î–æ–ª–≥–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ —É—Ç–æ–º–ª—è–µ—Ç|walk','–ö–∞–∂–¥—ã–π –ø—Ä–æ–ª—ë—Ç –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ ‚Äî –∏—Å–ø—ã—Ç–∞–Ω–∏–µ|stairs','–°—Ç—ã–¥–Ω–æ –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã|games','–ü—Ä—ã–∂–∫–∏|jumps','–ù–∏—á–µ–≥–æ –∏–∑ —ç—Ç–æ–≥–æ|none']
      .map(s=>{const [l,k]=s.split('|');return `<label class="opt" data-v="${k}"><span>${l}</span></label>`}).join('')}
  </div>
  ${actions()}
`)
+section('health',`<h2>–ï—Å—Ç—å –ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å?</h2>${chips('healthChips','health',['–î–∏–∞–±–µ—Ç','–ü—Ä–æ–±–ª–µ–º—ã —Å–æ —â–∏—Ç–æ–≤–∏–¥–∫–æ–π','–ì–∏–ø–µ—Ä—Ç–æ–Ω–∏—è','–ë–æ–ª—å –≤ —Å—É—Å—Ç–∞–≤–∞—Ö','–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å','–ù–µ—Ç'],true)}${actions()}`)
+section('nutrition',`<h2>–ü–∏—Ç–∞–Ω–∏–µ</h2>${opts('nutriOpts','nutri',['–ë—É–¥—É –ø–∏—Ç–∞—Ç—å—Å—è –ø–æ –º–µ–Ω—é-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –≤ –∫–ª—É–±–µ','–•–æ—á—É –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–∞—Ä–µ–ª–∫—É','–ù–µ—Ç, –ø–æ–∫–∞ –±–µ–∑ –ø–∏—Ç–∞–Ω–∏—è'])}${actions()}`)
+section('habits',`
  <h2>–í–∞—à–∏ –ø—Ä–∏–≤—ã—á–∫–∏ —Å–µ–π—á–∞—Å</h2>
  <div class="grid cols2">
    <div>
      <h3>–ü–ª–æ—Ö–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏</h3>
      ${chips('bad','bad',BAD,true)}
    </div>
    <div>
      <h3>–•–æ—Ä–æ—à–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏</h3>
      ${chips('good','good',GOOD,true)}
    </div>
  </div>
  <p class="hint">–û—Ç–º–µ—Ç—å—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø—Ä–æ –≤–∞—Å ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∏–∂–µ –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
  <div class="actions sticky"><button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button><button class="btn primary" id="toTrial">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí</button></div>
`)
+section('trial',`
  <h2>–£—Ä–∞! –í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã üéâ</h2>
  <p class="hint">–¢–µ–ø–µ—Ä—å –≤–∞–º –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–±–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞. –ï—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–∏–∂–µ.</p>
  <div class="tabs">
    <button class="tab is" data-tab="vk">VK –í–∏–¥–µ–æ</button>
    <button class="tab" data-tab="yt">YouTube</button>
    <button class="tab" data-tab="rt">RuTube</button>
  </div>
  <div class="player">
    <div data-pane="vk"><iframe src="https://vk.com/video_ext.php?oid=-222534261&id=456239990&hd=2" allow="autoplay; encrypted-media; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe></div>
    <div data-pane="yt" style="display:none"><iframe src="https://www.youtube.com/embed/TFltKZJoV2g" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading="lazy"></iframe></div>
    <div data-pane="rt" style="display:none"><iframe src="https://rutube.ru/video/private/fbad797705787d6048d2344b7aa55a90/?r=a&p=93p6xGkyvbtXxF38SzuoSw" allow="autoplay; encrypted-media; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe></div>
  </div>
  <div class="actions sticky">
    <button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button>
    <button class="btn primary" id="goCalc">–£–∑–Ω–∞—Ç—å –º–æ–π –ø—Ä–æ–≥–Ω–æ–∑ ‚Üí</button>
  </div>
`)
+section('loading',`
  <h2 style="text-align:center">–°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ‚Ä¶</h2>
  <p class="hint" style="text-align:center">–í–æ–∑—Ä–∞—Å—Ç ‚Ä¢ –ò–ú–¢ ‚Ä¢ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Ä¢ –¶–µ–ª—å</p>
`)
+section('result',`
  <h2 id="rTitle">–ì–æ—Ç–æ–≤–æ!</h2>
  <div id="nums" style="font-size:clamp(26px,6vw,46px);font-weight:800">‚Äî</div>
  <p class="hint" id="rSub"></p>

  <div id="caseBox" class="case" style="display:none"></div>

  <div id="offerInline" class="offer-inline" style="display:none">
    <p class="hint" style="margin:0 0 8px 0"><b>–¢–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Å —É –Ω–∞—Å –¥–µ–π—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: ‚àí70% –Ω–∞ –≤—Å–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã –≤ –∫–ª—É–±!</b></p>
    <div class="deal"><div class="deal-row" style="justify-content:flex-end">
      <span class="deal-timer" id="inlineTimer">15:00</span><span class="deal-badge">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ</span>
    </div></div>
  </div>

  <p class="hint">–ü—Ä–æ–≥–Ω–æ–∑ –Ω–æ—Å–∏—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π.</p>

  <div class="actions sticky">
    <button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button>
    <button class="btn primary" id="toProgram">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É ‚Üí</button>
  </div>
`)
+section('program',`
  <h2 id="pTitle">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</h2>
  <p class="hint" id="pLead"></p>
  <ul id="pList"></ul>
  <div class="actions sticky">
    <button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button>
    <button class="btn primary" id="toSale">–ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—é ‚Üí</button>
  </div>
`)
+section('sale',`
  <h2 id="sTitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–ª—É–± ¬´–®–ê–ì–ê–ô –î–û–ú–ê¬ª ‚ö°</h2>
  <p class="hint" id="sLead"></p>
  <div class="deal">
    <div class="deal-row">
      <span class="deal-badge">‚àí70% —Ç–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å</span>
      <span class="deal-timer" id="saleTimer">15:00</span>
    </div>
  </div>
  <div class="actions sticky">
    <button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button>
    <a class="btn primary" id="buyBtn" href="https://walk-walk.ru/?utm_source=website&utm_medium=quiz&utm_campaign=looseweight" target="_blank" rel="noopener">–•–æ—á—É –∞–±–æ–Ω–µ–º–µ–Ω—Ç —Å–æ —Å–∫–∏–¥–∫–æ–π 70%!</a>
  </div>
`);
document.getElementById('screens').innerHTML=html;

/* ---------- –Ω–∞–≤–∏–≥–∞—Ü–∏—è ---------- */
const screens=$$('#screens .screen');
let idx=0;
function show(i){ if(i<0||i>=screens.length)return; screens[idx].classList.remove('is'); idx=i; screens[idx].classList.add('is'); updateDiscountUI(); window.scrollTo({top:0,behavior:'smooth'}) }
function next(){ show(idx+1) } function prev(){ show(idx-1) }
document.getElementById('screens').addEventListener('click',e=>{
  const t=e.target;
  if(t.matches('[data-next]')){e.preventDefault(); next()}
  if(t.matches('[data-prev]')){e.preventDefault(); prev()}
});

/* —Å—Ç–∞—Ä—Ç */
document.getElementById('start').onclick=e=>{
  e.preventDefault();
  const name=$('#name').value?.trim();
  localStorage.removeItem('sdq'); A={}; if(name) A.name=name; save();
  show(idx+1); // –∫ –≤–æ–∑—Ä–∞—Å—Ç—É
};

/* ---------- –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º/—á–∏–ø—Å–∞–º ---------- */
document.getElementById('screens').addEventListener('click',e=>{
  const opt=e.target.closest('.opt');
  if(opt){
    const wrap=opt.closest('[data-key][data-type="opts"]'); if(!wrap) return;
    $$('.opt',wrap).forEach(x=>x.classList.remove('is'));
    opt.classList.add('is');
    A[wrap.dataset.key]=opt.dataset.v; save();
    return;
  }
  const chip=e.target.closest('.chip');
  if(chip){
    const wrap=chip.closest('[data-key][data-type="chips"]'); if(!wrap) return;
    const multi=wrap.dataset.multi==='1';
    if(multi){
      chip.classList.toggle('is');
      const set=new Set(A[wrap.dataset.key]||[]);
      chip.classList.contains('is')?set.add(chip.dataset.v):set.delete(chip.dataset.v);
      A[wrap.dataset.key]=[...set];
    }else{
      $$('.chip',wrap).forEach(x=>x.classList.remove('is'));
      chip.classList.add('is');
      A[wrap.dataset.key]=chip.dataset.v;
    }
    save(); 
  }
});

/* –≤–≤–æ–¥—ã */
$('#name').addEventListener('input',e=>{A.name=e.target.value;save()});
const sr=$('#stepsRange'), sv=$('#sv'); sr.addEventListener('input',()=>{sv.textContent=+sr.value; A.steps=+sr.value; save()});

/* BMI */
function updateBMI(){
  const h=+$('#h').value||0, w=+$('#w').value||0; A.h=h; A.w=w; save();
  const out=$('#bmiInfo'); if(!(h&&w)){out.textContent=''; return}
  const bmi=w/Math.pow(h/100,2), B=bmi.toFixed(1);
  let cls='bmi-ok', txt='–Ω–æ—Ä–º–∞';
  if(bmi>=30){cls='bmi-bad';txt='–æ–∂–∏—Ä–µ–Ω–∏–µ'}
  else if(bmi>=25){cls='bmi-warn';txt='–∏–∑–±—ã—Ç–æ—á–Ω–∞—è –º–∞—Å—Å–∞'}
  else if(bmi<18.5){cls='bmi-warn';txt='–Ω–∏–∂–µ –Ω–æ—Ä–º—ã'}
  out.innerHTML=`–í–∞—à –ò–ú–¢: <b>${B}</b> ‚Äî <span class="bmi-tag ${cls}">${txt}</span>`;
}
$('#h').addEventListener('input',updateBMI);
$('#w').addEventListener('input',updateBMI);

/* —Ü–µ–ª—å: —Å–ª–∞–π–¥–µ—Ä + –∏–Ω–≤–µ—Ä—Å–∏—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
const goalRange=$('#goalRange'), goalVal=$('#goalVal'), goalBadge=$('#goalBadge');
function updGoal(){
  const v=+goalRange.value; goalVal.textContent=v.toFixed(1);
  goalBadge.textContent=(v<4)?'–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å':(v<8?'—É–º–µ—Ä–µ–Ω–Ω–æ':'–∞–º–±–∏—Ü–∏–æ–∑–Ω–æ');
  A.goalKg=v; save();
  // –∏–Ω–≤–µ—Ä—Å–∏—è: —á–µ–º –±–æ–ª—å—à–µ —Ü–µ–ª—å, —Ç–µ–º —Å—Ç—Ä–æ–π–Ω–µ–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞
  const idxImg = v>=16?0 : v>=13?1 : v>=10?2 : v>=8?3 : v>=6?4 : v>=4?5 : v>=2?6 : v>0?7 : 8;
  $$('#goalStack img').forEach((img,i)=>img.style.opacity=(i===idxImg)?1:0);
}
goalRange.addEventListener('input',updGoal);
$('#goalKeep').addEventListener('change',e=>{A.keep=!!e.target.checked;save()});
updGoal();

/* ¬´–≤ –Ω–µ–¥–µ–ª—é¬ª: –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫ —Å chart.jpg */
function revealAha(){
  const aha=$('#aha'); if(!A.perweek){aha.classList.add('hidden');aha.innerHTML='';return}
  const txt={
    '2 —Ä–∞–∑–∞':'–°—Ç–∞—Ä—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º: 2 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —É—Å—Ç–æ–π—á–∏–≤–æ —Å–æ–∑–¥–∞—é—Ç –ø—Ä–∏–≤—ã—á–∫—É.',
    '3 —Ä–∞–∑–∞':'–ó–æ–ª–æ—Ç–∞—è —Å–µ—Ä–µ–¥–∏–Ω–∞: 3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π —Ç–µ–º–ø.',
    '4‚Äì5 —Ä–∞–∑':'–£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 4‚Äì5 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —É—Å–∫–æ—Ä—è—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.',
    '–ö–∞–∂–¥—ã–π –¥–µ–Ω—å 20‚Äì30 –º–∏–Ω':'–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –∑–∞–∫—Ä–µ–ø–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É.'
  }[A.perweek]||'';
  aha.classList.remove('hidden');
  aha.innerHTML=`<b>${txt}</b><br><span class="hint">–ù–∏–∂–µ ‚Äî –ø—Ä–∏–º–µ—Ä –≤–∞—à–µ–π –Ω–µ–¥–µ–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ –∫–ª—É–±–µ.</span><img src="chart.jpg" alt="–ü—Ä–∏–º–µ—Ä –Ω–µ–¥–µ–ª–∏">`;
}
document.getElementById('pwChips').addEventListener('click',()=>{revealAha()});

/* –≤–∏–¥–µ–æ-–≤–∫–ª–∞–¥–∫–∏ */
$$('.tab').forEach(tab=>tab.addEventListener('click',()=>{
  $$('.tab').forEach(x=>x.classList.remove('is')); tab.classList.add('is');
  const k=tab.dataset.tab; $$('[data-pane]').forEach(p=>p.style.display=(p.getAttribute('data-pane')===k)?'block':'none');
}));

/* —Å–∫–∏–¥–∫–∞: —Ç–æ–ª—å–∫–æ —Å–æ 2-–≥–æ —ç–∫—Ä–∞–Ω–∞, —Ä–∞—Å—Ç—ë—Ç –ø–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º —à–∞–≥–∞–º –∏ –∑–µ–ª–µ–Ω–µ–µ—Ç –Ω–∞ 70% */
const FLOW=['intro','age','promo1','body','steps','promo2','bmi','life','exp','promo3','goal','mot','perweek','promo4','hard','health','nutrition','habits','trial','loading','result','program','sale'];
const DISC_STEPS=['age','body','steps','bmi','life','exp','goal','mot','perweek','hard','health','nutrition','habits'];
function updateDiscountUI(){
  const id=screens[idx].dataset.id;
  const visible = FLOW.indexOf(id) >= FLOW.indexOf('age'); // —Å–æ 2-–≥–æ
  const disc=$('#disc'); disc.style.display=visible?'inline-flex':'none';
  // —Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ —É–∂–µ –ø—Ä–æ—à–ª–∏ –∫ —Ç–µ–∫—É—â–µ–º—É —ç–∫—Ä–∞–Ω—É
  const pos = FLOW.indexOf(id);
  let passed=0; for(const s of DISC_STEPS){ if(FLOW.indexOf(s)<=pos) passed++ }
  const pct=Math.min(70, Math.round(passed/DISC_STEPS.length*70));
  $('#discPct').textContent=pct+'%';
  disc.classList.toggle('win', pct>=70);
}
updateDiscountUI();

/* –ø–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã */
$('#toTrial').onclick=()=>show(FLOW.indexOf('trial'));
$('#goCalc').onclick=()=>{ show(FLOW.indexOf('loading')); setTimeout(()=>calculate(),1200) };

/* —Ä–∞—Å—á—ë—Ç */
function fAge(){const a=A.age||'';if(/50/.test(a))return 0.88;if(/40/.test(a))return 0.94;if(/30/.test(a))return 0.98;return 1.06}
function fLife(){const l=A.life||'';if(/–°–∏–¥—è—á–∞—è/.test(l))return .90;if(/–£–º–µ—Ä–µ–Ω–Ω–æ/.test(l))return 1.00;return 1.08}
function fExp(){const e=A.exp||'';if(/–ù–∏–∫–æ–≥–¥–∞/.test(e))return .95;if(/–†–µ–≥—É–ª—è—Ä–Ω–æ/.test(e))return 1.08;return 1.00}
function fBody(){switch(A.body){case 'slim':return .92;case 'avg':return 1;case 'large':return .96;case 'obese':return .92;default:return 1}}
function fSteps(){const now=+A.steps||4000, add=2000, t=now+add; let boost=1+add/10000; if(now<3000)boost+=.08; if(now>9000)boost-=.06; return{f:Math.max(.95,Math.min(1.28,boost)),t}}
function fNutri(){let f=1;if(A.nutri?.includes('–º–µ–Ω—é'))f+=.22;else if(A.nutri?.includes('—Ç–∞—Ä–µ–ª–∫—É'))f+=.12;else f-=.12;f-=((A.bad||[]).length)*.03;f+=Math.min(((A.good||[]).length)*.02,10);return Math.max(.7,Math.min(1.35,f))}
function fHealth(){const h=new Set(A.health||[]);let f=1;if(h.has('–î–∏–∞–±–µ—Ç')||h.has('–ü—Ä–æ–±–ª–µ–º—ã —Å–æ —â–∏—Ç–æ–≤–∏–¥–∫–æ–π')||h.has('–ì–∏–ø–µ—Ä—Ç–æ–Ω–∏—è'))f-=.06;if(h.has('–ë–æ–ª—å –≤ —Å—É—Å—Ç–∞–≤–∞—Ö'))f-=.04;return Math.max(.8,f)}
function fPain(){switch(A.hardKey){case 'walk':return .94;case 'stairs':return .93;case 'games':return .96;case 'jumps':return .95;case 'none':return 1.02;default:return 1}}

function rate(){
  const bmi=A.w&&A.h? (A.w/Math.pow(A.h/100,2)) : 26;
  let r=.5; if(bmi>=30) r+=.08; else if(bmi<23) r-=.08;
  r*=fAge()*fLife()*fExp()*fBody()*fSteps().f*fNutri()*fHealth()*fPain();
  return Math.max(.25,Math.min(.9,+r.toFixed(2)));
}
function fmtDur(wks){ if(wks<=10){return{n:wks,u:'–Ω–µ–¥–µ–ª—å'}} const m=Math.ceil(wks/4); return{n:m,u:'–º–µ—Å.'} }
function goalKg(){ return Math.max(0,Math.min(20, +A.goalKg||3)) }

function calculate(){
  const name=A.name?.trim()||'–î—Ä—É–∑—å—è', kg=goalKg(), rt=rate(), t=fSteps().t;
  const weeks=Math.max(4,Math.min(16,Math.ceil((A.keep?4:kg)/rt)));
  const d=fmtDur(weeks);
  $('#rTitle').textContent=`${name}, –≤–∞—à –ø—Ä–æ–≥–Ω–æ–∑ –≥–æ—Ç–æ–≤ ‚ú®`;
  const txtMain = (A.keep||kg===0) ? `–ß—Ç–æ–±—ã –ø—Ä–∏–π—Ç–∏ –∫ —Ü–µ–ª–∏ –∑–∞ ${d.n} ${d.u}` : `‚àí${kg} –∫–≥ –∑–∞ ${d.n} ${d.u}`;
  $('#nums').textContent=txtMain;
  $('#rSub').innerHTML = (A.keep||kg===0) ? `–°—Ñ–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ <b>—Ç–æ–Ω—É—Å–µ –∏ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏</b>.` :
    `–° —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏ –®–ê–ì–ê–ô –î–û–ú–ê ‚ö° –≤—ã –±—É–¥–µ—Ç–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å <b>${t.toLocaleString('ru-RU')}</b> —à–∞–≥–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!<br><span class="hint">–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ç–µ–º–ø: ~<b>${rt.toFixed(1)} –∫–≥/–Ω–µ–¥–µ–ª—é</b>.</span>`;

  const cs=pickCase(Math.round(kg));
  if(cs){ const box=$('#caseBox'); box.style.display='grid'; box.innerHTML=`<img src="${cs.img}" alt=""><div><b>–ö–∞–∫ —É –Ω–∞—à–µ–π —à–∞–≥–∞—Ç–µ–ª—å–Ω–∏—Ü—ã ${cs.name}!</b><br>–û–Ω–∞ —É–∂–µ —Å–±—Ä–æ—Å–∏–ª–∞ ${cs.kg} –∫–≥ –∑–∞ ${cs.months} –º–µ—Å. –≤ –∫–ª—É–±–µ.</div>` }

  // –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–ª–∞–π–Ω-–æ—Ñ—Ñ–µ—Ä + —Ç–∞–π–º–µ—Ä—ã
  $('#offerInline').style.display='block';
  startTimer($('#inlineTimer'),'sdq_inline_deadline');
  show(FLOW.indexOf('result'));
}

/* –ø—Ä–æ–≥—Ä–∞–º–º—ã (–∫–æ—Ä–æ—Ç–∫–∏–π –±–ª–æ–∫-–ø—Ä–∏–º–µ—Ä) */
$('#toProgram').onclick=()=>{
  $('#pTitle').textContent='–ú—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–æ–¥ –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã';
  $('#pLead').innerHTML='–° —É—á—ë—Ç–æ–º –≤–∞—à–µ–π —Ü–µ–ª–∏ –∏ —Ä–µ–∂–∏–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.';
  $('#pList').innerHTML='<li>–î–æ—Å—Ç—É–ø –∫ —à–∞–≥–∞—Ç–µ–ª—å–Ω—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º</li><li>–ì–æ—Ç–æ–≤—ã–µ –ø–ª–∞–Ω—ã –Ω–∞ –Ω–µ–¥–µ–ª—é</li><li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</li>';
  show(FLOW.indexOf('program'));
};
$('#toSale').onclick=()=>{ 
  const name=A.name?.trim()||'–î—Ä—É–∑—å—è', kg=goalKg();
  $('#sTitle').textContent=`${name}, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª—É–±—É ¬´–®–ê–ì–ê–ô –î–û–ú–ê¬ª ‚ö°`;
  $('#sLead').innerHTML = (A.keep||kg===0) ? `–ß—Ç–æ–±—ã –ø—Ä–∏–π—Ç–∏ –∫ —Ü–µ–ª–∏ ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –ø–ª–∞–Ω—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É.` : `–ß—Ç–æ–±—ã –ø—Ä–∏–π—Ç–∏ –∫ —Ü–µ–ª–∏ <b>‚àí${kg} –∫–≥</b> ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –ø–ª–∞–Ω—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É.`;
  startTimer($('#saleTimer'),'sdq_sale_deadline');
  show(FLOW.indexOf('sale'));
};

/* —Ç–∞–π–º–µ—Ä—ã 15:00 */
function startTimer(el,key){
  const now=Date.now(); let end=+localStorage.getItem(key)||0; if(!(end>now)) {end=now+15*60*1000; localStorage.setItem(key,end)}
  function tick(){const left=end-Date.now(); if(left<=0){el.textContent='00:00';return}
    const m=Math.floor(left/60000), s=Math.floor((left%60000)/1000); el.textContent=String(m).padStart(2,'0')+':'+String(s).padStart(2,'0'); requestAnimationFrame(tick)}
  tick();
}

/* –ø–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥ —Å –∫–Ω–æ–ø–æ–∫ */
document.getElementById('screens').addEventListener('click',e=>{
  if(e.target.id==='goCalc') return; // –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤—ã—à–µ
});

/* –ø–æ–∫–∞–∑–∞—Ç—å —Å–∫–∏–¥–∫—É –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–æ–∫–∞–∑–µ */
updateDiscountUI();
</script>
</body>
</html>
